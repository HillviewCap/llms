Title: Endpoints

URL Source: https://docs.astro.build/en/guides/endpoints/

Markdown Content:
Endpoints | Docs
===============
           

[Skip to content](https://docs.astro.build/en/guides/endpoints/#_top)

[](https://astro.build/)[](https://docs.astro.build/en/getting-started/)

SearchK

[GitHub](https://github.com/withastro/astro) [Discord](https://astro.build/chat)

Select theme   Select language 

*   [Start](https://docs.astro.build/en/guides/endpoints/#__tab-start)
*   [Guides and recipes](https://docs.astro.build/en/guides/endpoints/#__tab-guides-and-recipes)
*   [Reference](https://docs.astro.build/en/guides/endpoints/#__tab-reference)
*   [Integrations](https://docs.astro.build/en/guides/endpoints/#__tab-integrations)
*   [Third-party services](https://docs.astro.build/en/guides/endpoints/#__tab-third-party-services)

*   [Getting started](https://docs.astro.build/en/getting-started/)
*   Welcome, world!
    
    *   [Why Astro?](https://docs.astro.build/en/concepts/why-astro/)
    *   [Islands architecture](https://docs.astro.build/en/concepts/islands/)
    *   [Tutorial: Build a blog](https://docs.astro.build/en/tutorial/0-introduction/)
    
*   Start a new project
    
    *   [Installation](https://docs.astro.build/en/install-and-setup/)
    *   [Project structure](https://docs.astro.build/en/basics/project-structure/)
    *   [Develop and build](https://docs.astro.build/en/develop-and-build/)
    
*   Configuration
    
    *   [Configuration overview](https://docs.astro.build/en/guides/configuring-astro/)
    *   [Editor setup](https://docs.astro.build/en/editor-setup/)
    *   [TypeScript](https://docs.astro.build/en/guides/typescript/)
    *   [Environment variables](https://docs.astro.build/en/guides/environment-variables/)
    *   [Dev toolbar](https://docs.astro.build/en/guides/dev-toolbar/)
    
*   Migrate to Astro
    
    *   [Site migration overview](https://docs.astro.build/en/guides/migrate-to-astro/)
    *   [Create React App](https://docs.astro.build/en/guides/migrate-to-astro/from-create-react-app/)
    *   [Docusaurus](https://docs.astro.build/en/guides/migrate-to-astro/from-docusaurus/)
    *   [Eleventy](https://docs.astro.build/en/guides/migrate-to-astro/from-eleventy/)
    *   [Gatsby](https://docs.astro.build/en/guides/migrate-to-astro/from-gatsby/)
    *   [GitBook](https://docs.astro.build/en/guides/migrate-to-astro/from-gitbook/)
    *   [Gridsome](https://docs.astro.build/en/guides/migrate-to-astro/from-gridsome/)
    *   [Hugo](https://docs.astro.build/en/guides/migrate-to-astro/from-hugo/)
    *   [Jekyll](https://docs.astro.build/en/guides/migrate-to-astro/from-jekyll/)
    *   [Next.js](https://docs.astro.build/en/guides/migrate-to-astro/from-nextjs/)
    *   [NuxtJS](https://docs.astro.build/en/guides/migrate-to-astro/from-nuxtjs/)
    *   [Pelican](https://docs.astro.build/en/guides/migrate-to-astro/from-pelican/)
    *   [SvelteKit](https://docs.astro.build/en/guides/migrate-to-astro/from-sveltekit/)
    *   [VuePress](https://docs.astro.build/en/guides/migrate-to-astro/from-vuepress/)
    *   [WordPress](https://docs.astro.build/en/guides/migrate-to-astro/from-wordpress/)
    

*   Routing and navigation
    
    *   [Pages](https://docs.astro.build/en/basics/astro-pages/)
    *   [Routing](https://docs.astro.build/en/guides/routing/)
    *   [Endpoints](https://docs.astro.build/en/guides/endpoints/)
    *   [Middleware](https://docs.astro.build/en/guides/middleware/)
    *   [Internationalization (i18n)](https://docs.astro.build/en/guides/internationalization/)
    *   [Prefetch](https://docs.astro.build/en/guides/prefetch/)
    *   [View transitions](https://docs.astro.build/en/guides/view-transitions/)
    
*   Build your UI
    
    *   [Components](https://docs.astro.build/en/basics/astro-components/)
    *   [Layouts](https://docs.astro.build/en/basics/layouts/)
    *   [Styles and CSS](https://docs.astro.build/en/guides/styling/)
    *   [Fonts](https://docs.astro.build/en/guides/fonts/)
    *   [Syntax Highlighting](https://docs.astro.build/en/guides/syntax-highlighting/)
    *   [Scripts and event handling](https://docs.astro.build/en/guides/client-side-scripts/)
    *   [Front-end frameworks](https://docs.astro.build/en/guides/framework-components/)
    
*   Add content to your site
    
    *   [Markdown](https://docs.astro.build/en/guides/markdown-content/)
    *   [Content collections](https://docs.astro.build/en/guides/content-collections/)
    *   [Images](https://docs.astro.build/en/guides/images/)
    *   [Data fetching](https://docs.astro.build/en/guides/data-fetching/)
    *   [Astro DB](https://docs.astro.build/en/guides/astro-db/)
    
*   Server rendering
    
    *   [On-demand rendering](https://docs.astro.build/en/guides/on-demand-rendering/)
    *   [Server islands](https://docs.astro.build/en/guides/server-islands/)
    *   [Actions](https://docs.astro.build/en/guides/actions/)
    *   [Sessions](https://docs.astro.build/en/guides/sessions/)
    
*   Upgrade
    
    *   [Upgrade Astro](https://docs.astro.build/en/upgrade-astro/)
    *   Major upgrade guides
        
        *   [v5.0](https://docs.astro.build/en/guides/upgrade-to/v5/)
        *   [v4.0](https://docs.astro.build/en/guides/upgrade-to/v4/)
        *   [v3.0](https://docs.astro.build/en/guides/upgrade-to/v3/)
        *   [v2.0](https://docs.astro.build/en/guides/upgrade-to/v2/)
        *   [v1.0](https://docs.astro.build/en/guides/upgrade-to/v1/)
        
    
*   [Troubleshooting](https://docs.astro.build/en/guides/troubleshooting/)
*   How-to recipes
    
    *   [Recipes overview](https://docs.astro.build/en/recipes/)
    *   [Installing a Vite or Rollup plugin](https://docs.astro.build/en/recipes/add-yaml-support/)
    *   [Analyze bundle size](https://docs.astro.build/en/recipes/analyze-bundle-size/)
    *   [Build a custom image component](https://docs.astro.build/en/recipes/build-custom-img-component/)
    *   [Build HTML forms in Astro pages](https://docs.astro.build/en/recipes/build-forms/)
    *   [Build forms with API routes](https://docs.astro.build/en/recipes/build-forms-api/)
    *   [Use Bun with Astro](https://docs.astro.build/en/recipes/bun/)
    *   [Call endpoints from the server](https://docs.astro.build/en/recipes/call-endpoints/)
    *   [Verify a Captcha](https://docs.astro.build/en/recipes/captcha/)
    *   [Build your Astro site with Docker](https://docs.astro.build/en/recipes/docker/)
    *   [Dynamically import images](https://docs.astro.build/en/recipes/dynamically-importing-images/)
    *   [Add icons to external links](https://docs.astro.build/en/recipes/external-links/)
    *   [Add i18n features](https://docs.astro.build/en/recipes/i18n/)
    *   [Create a dev toolbar app](https://docs.astro.build/en/recipes/making-toolbar-apps/)
    *   [Add last modified time](https://docs.astro.build/en/recipes/modified-time/)
    *   [Add reading time](https://docs.astro.build/en/recipes/reading-time/)
    *   [Add an RSS feed](https://docs.astro.build/en/recipes/rss/)
    *   [Share state between Astro components](https://docs.astro.build/en/recipes/sharing-state/)
    *   [Share state between islands](https://docs.astro.build/en/recipes/sharing-state-islands/)
    *   [Using streaming to improve page performance](https://docs.astro.build/en/recipes/streaming-improve-page-performance/)
    *   [Style rendered Markdown with Tailwind Typography](https://docs.astro.build/en/recipes/tailwind-rendered-markdown/)
    
*   [Contribute to Astro](https://docs.astro.build/en/contribute/)

*   Astro Template Syntax
    
    *   [Template expressions reference](https://docs.astro.build/en/reference/astro-syntax/)
    *   [Template directives reference](https://docs.astro.build/en/reference/directives-reference/)
    
*   [Configuration Reference](https://docs.astro.build/en/reference/configuration-reference/)
*   [CLI Commands](https://docs.astro.build/en/reference/cli-reference/)
*   [Imports reference](https://docs.astro.build/en/guides/imports/)
*   [Routing Reference](https://docs.astro.build/en/reference/routing-reference/)
*   Runtime API
    
    *   [Render context](https://docs.astro.build/en/reference/api-reference/)
    *   [astro:actions](https://docs.astro.build/en/reference/modules/astro-actions/)
    *   [astro:assets](https://docs.astro.build/en/reference/modules/astro-assets/)
    *   [astro:config](https://docs.astro.build/en/reference/modules/astro-config/)
    *   [astro:content](https://docs.astro.build/en/reference/modules/astro-content/)
    *   [astro:env](https://docs.astro.build/en/reference/modules/astro-env/)
    *   [astro:i18n](https://docs.astro.build/en/reference/modules/astro-i18n/)
    *   [astro:middleware](https://docs.astro.build/en/reference/modules/astro-middleware/)
    *   [astro:transitions](https://docs.astro.build/en/reference/modules/astro-transitions/)
    
*   Other development APIs
    
    *   [Integration API](https://docs.astro.build/en/reference/integrations-reference/)
    *   [Adapter API](https://docs.astro.build/en/reference/adapter-reference/)
    *   [Content Loader API](https://docs.astro.build/en/reference/content-loader-reference/)
    *   [Image Service API](https://docs.astro.build/en/reference/image-service-reference/)
    *   [Dev Toolbar App API](https://docs.astro.build/en/reference/dev-toolbar-app-reference/)
    *   [Container API (experimental)](https://docs.astro.build/en/reference/container-reference/)
    *   [Programmatic Astro API (experimental)](https://docs.astro.build/en/reference/programmatic-reference/)
    
*   Experimental features
    
    *   [Configuring experimental flags](https://docs.astro.build/en/reference/experimental-flags/)
    *   [Responsive images](https://docs.astro.build/en/reference/experimental-flags/responsive-images/)
    *   [Fonts](https://docs.astro.build/en/reference/experimental-flags/fonts/)
    *   [Client prerendering](https://docs.astro.build/en/reference/experimental-flags/client-prerender/)
    *   [Intellisense for collections](https://docs.astro.build/en/reference/experimental-flags/content-intellisense/)
    *   [Preserve scripts order](https://docs.astro.build/en/reference/experimental-flags/preserve-scripts-order/)
    *   [Markdown heading ID compatibility](https://docs.astro.build/en/reference/experimental-flags/heading-id-compat/)
    
*   [Legacy flags](https://docs.astro.build/en/reference/legacy-flags/)
*   [Error reference](https://docs.astro.build/en/reference/error-reference/)

*   [Integrations overview](https://docs.astro.build/en/guides/integrations-guide/)
*   UI frameworks
    
    *   [Alpine.js](https://docs.astro.build/en/guides/integrations-guide/alpinejs/)
    *   [Preact](https://docs.astro.build/en/guides/integrations-guide/preact/)
    *   [React](https://docs.astro.build/en/guides/integrations-guide/react/)
    *   [SolidJS](https://docs.astro.build/en/guides/integrations-guide/solid-js/)
    *   [Svelte](https://docs.astro.build/en/guides/integrations-guide/svelte/)
    *   [Vue](https://docs.astro.build/en/guides/integrations-guide/vue/)
    
*   Adapters
    
    *   [Cloudflare](https://docs.astro.build/en/guides/integrations-guide/cloudflare/)
    *   [Netlify](https://docs.astro.build/en/guides/integrations-guide/netlify/)
    *   [Node](https://docs.astro.build/en/guides/integrations-guide/node/)
    *   [Vercel](https://docs.astro.build/en/guides/integrations-guide/vercel/)
    
*   Other official integrations
    
    *   [DB](https://docs.astro.build/en/guides/integrations-guide/db/)
    *   [Markdoc](https://docs.astro.build/en/guides/integrations-guide/markdoc/)
    *   [MDX](https://docs.astro.build/en/guides/integrations-guide/mdx/)
    *   [Partytown](https://docs.astro.build/en/guides/integrations-guide/partytown/)
    *   [Sitemap](https://docs.astro.build/en/guides/integrations-guide/sitemap/)
    
*   [Publish to NPM](https://docs.astro.build/en/reference/publish-to-npm/)

*   Deployment guides
    
    *   [Deployment overview](https://docs.astro.build/en/guides/deploy/)
    *   [AWS](https://docs.astro.build/en/guides/deploy/aws/)
    *   [Azion](https://docs.astro.build/en/guides/deploy/azion/)
    *   [Buddy](https://docs.astro.build/en/guides/deploy/buddy/)
    *   [Cleavr](https://docs.astro.build/en/guides/deploy/cleavr/)
    *   [Clever Cloud](https://docs.astro.build/en/guides/deploy/clever-cloud/)
    *   [Cloudflare](https://docs.astro.build/en/guides/deploy/cloudflare/)
    *   [Deno](https://docs.astro.build/en/guides/deploy/deno/)
    *   [Edgio](https://docs.astro.build/en/guides/deploy/edgio/)
    *   [Fleek](https://docs.astro.build/en/guides/deploy/fleek/)
    *   [Flightcontrol](https://docs.astro.build/en/guides/deploy/flightcontrol/)
    *   [Fly.io](https://docs.astro.build/en/guides/deploy/flyio/)
    *   [GitHub Pages](https://docs.astro.build/en/guides/deploy/github/)
    *   [GitLab Pages](https://docs.astro.build/en/guides/deploy/gitlab/)
    *   [Google Cloud](https://docs.astro.build/en/guides/deploy/google-cloud/)
    *   [Google Firebase](https://docs.astro.build/en/guides/deploy/google-firebase/)
    *   [Heroku](https://docs.astro.build/en/guides/deploy/heroku/)
    *   [Kinsta](https://docs.astro.build/en/guides/deploy/kinsta/)
    *   [Microsoft Azure](https://docs.astro.build/en/guides/deploy/microsoft-azure/)
    *   [Netlify](https://docs.astro.build/en/guides/deploy/netlify/)
    *   [Render](https://docs.astro.build/en/guides/deploy/render/)
    *   [SST](https://docs.astro.build/en/guides/deploy/sst/)
    *   [Stormkit](https://docs.astro.build/en/guides/deploy/stormkit/)
    *   [Surge](https://docs.astro.build/en/guides/deploy/surge/)
    *   [Vercel](https://docs.astro.build/en/guides/deploy/vercel/)
    *   [Zeabur](https://docs.astro.build/en/guides/deploy/zeabur/)
    *   [Zerops](https://docs.astro.build/en/guides/deploy/zerops/)
    
*   Content management systems
    
    *   [CMS overview](https://docs.astro.build/en/guides/cms/)
    *   [ApostropheCMS](https://docs.astro.build/en/guides/cms/apostrophecms/)
    *   [Builder.io](https://docs.astro.build/en/guides/cms/builderio/)
    *   [ButterCMS](https://docs.astro.build/en/guides/cms/buttercms/)
    *   [Caisy](https://docs.astro.build/en/guides/cms/caisy/)
    *   [CloudCannon](https://docs.astro.build/en/guides/cms/cloudcannon/)
    *   [Contentful](https://docs.astro.build/en/guides/cms/contentful/)
    *   [Cosmic](https://docs.astro.build/en/guides/cms/cosmic/)
    *   [Craft CMS](https://docs.astro.build/en/guides/cms/craft-cms/)
    *   [Crystallize](https://docs.astro.build/en/guides/cms/crystallize/)
    *   [DatoCMS](https://docs.astro.build/en/guides/cms/datocms/)
    *   [Decap CMS](https://docs.astro.build/en/guides/cms/decap-cms/)
    *   [Directus](https://docs.astro.build/en/guides/cms/directus/)
    *   [Drupal](https://docs.astro.build/en/guides/cms/drupal/)
    *   [Flotiq](https://docs.astro.build/en/guides/cms/flotiq/)
    *   [Front Matter CMS](https://docs.astro.build/en/guides/cms/frontmatter-cms/)
    *   [Ghost](https://docs.astro.build/en/guides/cms/ghost/)
    *   [GitCMS](https://docs.astro.build/en/guides/cms/gitcms/)
    *   [Hashnode](https://docs.astro.build/en/guides/cms/hashnode/)
    *   [Hygraph](https://docs.astro.build/en/guides/cms/hygraph/)
    *   [Keystatic](https://docs.astro.build/en/guides/cms/keystatic/)
    *   [KeystoneJS](https://docs.astro.build/en/guides/cms/keystonejs/)
    *   [Kontent.ai](https://docs.astro.build/en/guides/cms/kontent-ai/)
    *   [microCMS](https://docs.astro.build/en/guides/cms/microcms/)
    *   [Payload CMS](https://docs.astro.build/en/guides/cms/payload/)
    *   [Prepr CMS](https://docs.astro.build/en/guides/cms/preprcms/)
    *   [Prismic](https://docs.astro.build/en/guides/cms/prismic/)
    *   [Sanity](https://docs.astro.build/en/guides/cms/sanity/)
    *   [Sitecore XM](https://docs.astro.build/en/guides/cms/sitecore/)
    *   [Spinal](https://docs.astro.build/en/guides/cms/spinal/)
    *   [Statamic](https://docs.astro.build/en/guides/cms/statamic/)
    *   [Storyblok](https://docs.astro.build/en/guides/cms/storyblok/)
    *   [Strapi](https://docs.astro.build/en/guides/cms/strapi/)
    *   [StudioCMS](https://docs.astro.build/en/guides/cms/studiocms/)
    *   [Tina CMS](https://docs.astro.build/en/guides/cms/tina-cms/)
    *   [Umbraco](https://docs.astro.build/en/guides/cms/umbraco/)
    *   [Wordpress](https://docs.astro.build/en/guides/cms/wordpress/)
    
*   Backend services
    
    *   [Backend services overview](https://docs.astro.build/en/guides/backend/)
    *   [Appwrite](https://docs.astro.build/en/guides/backend/appwriteio/)
    *   [Firebase](https://docs.astro.build/en/guides/backend/google-firebase/)
    *   [Neon](https://docs.astro.build/en/guides/backend/neon/)
    *   [Sentry](https://docs.astro.build/en/guides/backend/sentry/)
    *   [Supabase](https://docs.astro.build/en/guides/backend/supabase/)
    *   [Turso](https://docs.astro.build/en/guides/backend/turso/)
    *   [Xata](https://docs.astro.build/en/guides/backend/xata/)
    
*   Hosted media & DAM
    
    *   [Digital Asset Management overview](https://docs.astro.build/en/guides/media/)
    *   [Cloudinary](https://docs.astro.build/en/guides/media/cloudinary/)
    
*   [E-commerce](https://docs.astro.build/en/guides/ecommerce/)
*   [Authentication](https://docs.astro.build/en/guides/authentication/)
*   [Testing](https://docs.astro.build/en/guides/testing/)

 

Sponsored by
------------

[](https://www.netlify.com/?utm_campaign=Astro-2024&utm_source=astro-referral)[](https://sentry.io/welcome/?utm_medium=partner&utm_source=astro&utm_campaign=astro-docs)[](https://idx.dev/?utm_source=astro&utm_medium=astro&utm_campaign=astro)

[GitHub](https://github.com/withastro/astro) [Discord](https://astro.build/chat)

Select theme  Select language 

Sponsored by
------------

[](https://www.netlify.com/?utm_campaign=Astro-2024&utm_source=astro-referral)[](https://sentry.io/welcome/?utm_medium=partner&utm_source=astro&utm_campaign=astro-docs)[](https://idx.dev/?utm_source=astro&utm_medium=astro&utm_campaign=astro)

On this page

Overview

*   [Overview](https://docs.astro.build/en/guides/endpoints/#_top)
*   [Static File Endpoints](https://docs.astro.build/en/guides/endpoints/#static-file-endpoints)
    *   [params and Dynamic routing](https://docs.astro.build/en/guides/endpoints/#params-and-dynamic-routing)
    *   [request](https://docs.astro.build/en/guides/endpoints/#request)
*   [Server Endpoints (API Routes)](https://docs.astro.build/en/guides/endpoints/#server-endpoints-api-routes)
    *   [HTTP methods](https://docs.astro.build/en/guides/endpoints/#http-methods)
    *   [request](https://docs.astro.build/en/guides/endpoints/#request-1)
    *   [Redirects](https://docs.astro.build/en/guides/endpoints/#redirects)

On this page
------------

*   [Overview](https://docs.astro.build/en/guides/endpoints/#_top)
*   [Static File Endpoints](https://docs.astro.build/en/guides/endpoints/#static-file-endpoints)
    *   [params and Dynamic routing](https://docs.astro.build/en/guides/endpoints/#params-and-dynamic-routing)
    *   [request](https://docs.astro.build/en/guides/endpoints/#request)
*   [Server Endpoints (API Routes)](https://docs.astro.build/en/guides/endpoints/#server-endpoints-api-routes)
    *   [HTTP methods](https://docs.astro.build/en/guides/endpoints/#http-methods)
    *   [request](https://docs.astro.build/en/guides/endpoints/#request-1)
    *   [Redirects](https://docs.astro.build/en/guides/endpoints/#redirects)

![Image 1](https://docs.astro.build/_astro/CodingInPublic.DpaYu7Qd_5sx41.webp)

Learn Astro with **Coding in Public**
-------------------------------------

150+ video lessons • Astro v5 ready

[Get 20% off](https://learnastro.dev/?code=ASTRO_PROMO)

Endpoints
=========

Astro lets you create custom endpoints to serve any kind of data. You can use this to generate images, expose an RSS document, or use them as API Routes to build a full API for your site.

In statically-generated sites, your custom endpoints are called at build time to produce static files. If you opt in to [SSR](https://docs.astro.build/en/guides/on-demand-rendering/) mode, custom endpoints turn into live server endpoints that are called on request. Static and SSR endpoints are defined similarly, but SSR endpoints support additional features.

Static File Endpoints
---------------------

[Section titled Static File Endpoints](https://docs.astro.build/en/guides/endpoints/#static-file-endpoints)

To create a custom endpoint, add a `.js` or `.ts` file to the `/pages` directory. The `.js` or `.ts` extension will be removed during the build process, so the name of the file should include the extension of the data you want to create. For example, `src/pages/data.json.ts` will build a `/data.json` endpoint.

Endpoints export a `GET` function (optionally `async`) that receives a [context object](https://docs.astro.build/en/reference/api-reference/) with properties similar to the `Astro` global. Here, it returns a [`Response`](https://developer.mozilla.org/en-US/docs/Web/API/Response) object with a `name` and `url`, and Astro will call this at build time and use the contents of the body to generate the file.

src/pages/builtwith.json.ts

```
// Outputs: /builtwith.jsonexport function GET({ params, request }) {  return new Response(    JSON.stringify({      name: "Astro",      url: "https://astro.build/",    }),  );}
```

Since Astro v3.0, the returned `Response` object doesn’t have to include the `encoding` property anymore. For example, to produce a binary `.png` image:

src/pages/astro-logo.png.ts

```
export async function GET({ params, request }) {  const response = await fetch(    "https://docs.astro.build/assets/full-logo-light.png",  );
  return new Response(await response.arrayBuffer());}
```

You can also type your endpoint functions using the `APIRoute` type:

```
import type { APIRoute } from "astro";
export const GET: APIRoute = async ({ params, request }) => {...}
```

### `params` and Dynamic routing

[Section titled params and Dynamic routing](https://docs.astro.build/en/guides/endpoints/#params-and-dynamic-routing)

Endpoints support the same [dynamic routing](https://docs.astro.build/en/guides/routing/#dynamic-routes) features that pages do. Name your file with a bracketed parameter name and export a [`getStaticPaths()` function](https://docs.astro.build/en/reference/routing-reference/#getstaticpaths). Then, you can access the parameter using the `params` property passed to the endpoint function:

src/pages/api/\[id\].json.ts

```
import type { APIRoute } from "astro";
const usernames = ["Sarah", "Chris", "Yan", "Elian"];
export const GET: APIRoute = ({ params, request }) => {  const id = params.id;
  return new Response(    JSON.stringify({      name: usernames[id],    }),  );};
export function getStaticPaths() {  return [    { params: { id: "0" } },    { params: { id: "1" } },    { params: { id: "2" } },    { params: { id: "3" } },  ];}
```

This will generate four JSON endpoints at build time: `/api/0.json`, `/api/1.json`, `/api/2.json` and `/api/3.json`. Dynamic routing with endpoints works the same as it does with pages, but because the endpoint is a function and not a component, [props](https://docs.astro.build/en/reference/routing-reference/#data-passing-with-props) aren’t supported.

### `request`

[Section titled request](https://docs.astro.build/en/guides/endpoints/#request)

All endpoints receive a `request` property, but in static mode, you only have access to `request.url`. This returns the full URL of the current endpoint and works the same as [Astro.request.url](https://docs.astro.build/en/reference/api-reference/#request) does for pages.

src/pages/request-path.json.ts

```
import type { APIRoute } from "astro";
export const GET: APIRoute = ({ params, request }) => {  return new Response(    JSON.stringify({      path: new URL(request.url).pathname,    }),  );};
```

Server Endpoints (API Routes)
-----------------------------

[Section titled Server Endpoints (API Routes)](https://docs.astro.build/en/guides/endpoints/#server-endpoints-api-routes)

Everything described in the static file endpoints section can also be used in SSR mode: files can export a `GET` function which receives a [context object](https://docs.astro.build/en/reference/api-reference/) with properties similar to the `Astro` global.

But, unlike in `static` mode, when you enable on-demand rendering for a route, the endpoint will be built when it is requested. This unlocks new features that are unavailable at build time, and allows you to build API routes that listen for requests and securely execute code on the server at runtime.

Your routes will be rendered on demand by default in `server` mode. In `static` mode, you must opt out of prerendering for each custom endpoint with `export const prerender = false`.

![Image 2](https://docs.astro.build/houston_chef.webp) **Related recipe:** [Call endpoints from the server](https://docs.astro.build/en/recipes/call-endpoints/)

Note

Be sure to [enable an on-demand rendering mode](https://docs.astro.build/en/guides/on-demand-rendering/) before trying these examples, and opt out of prerendering in `static` mode.

Server endpoints can access `params` without exporting `getStaticPaths`, and they can return a `Response` object, allowing you to set status codes and headers:

src/pages/\[id\].json.js

```
import { getProduct } from "../db";
export async function GET({ params }) {  const id = params.id;  const product = await getProduct(id);
  if (!product) {    return new Response(null, {      status: 404,      statusText: "Not found",    });  }
  return new Response(JSON.stringify(product), {    status: 200,    headers: {      "Content-Type": "application/json",    },  });}
```

This will respond to any request that matches the dynamic route. For example, if we navigate to `/helmet.json`, `params.id` will be set to `helmet`. If `helmet` exists in the mock product database, the endpoint will use a `Response` object to respond with JSON and return a successful [HTTP status code](https://developer.mozilla.org/en-US/docs/Web/API/Response/status). If not, it will use a `Response` object to respond with a `404`.

In SSR mode, certain providers require the `Content-Type` header to return an image. In this case, use a `Response` object to specify a `headers` property. For example, to produce a binary `.png` image:

src/pages/astro-logo.png.ts

```
export async function GET({ params, request }) {  const response = await fetch(    "https://docs.astro.build/assets/full-logo-light.png",  );  const buffer = Buffer.from(await response.arrayBuffer());
  return new Response(buffer, {    headers: { "Content-Type": "image/png" },  });}
```

### HTTP methods

[Section titled HTTP methods](https://docs.astro.build/en/guides/endpoints/#http-methods)

In addition to the `GET` function, you can export a function with the name of any [HTTP method](https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods). When a request comes in, Astro will check the method and call the corresponding function.

You can also export an `ALL` function to match any method that doesn’t have a corresponding exported function. If there is a request with no matching method, it will redirect to your site’s [404 page](https://docs.astro.build/en/basics/astro-pages/#custom-404-error-page).

src/pages/methods.json.ts

```
export const GET: APIRoute = ({ params, request }) => {  return new Response(    JSON.stringify({      message: "This was a GET!",    }),  );};
export const POST: APIRoute = ({ request }) => {  return new Response(    JSON.stringify({      message: "This was a POST!",    }),  );};
export const DELETE: APIRoute = ({ request }) => {  return new Response(    JSON.stringify({      message: "This was a DELETE!",    }),  );};
export const ALL: APIRoute = ({ request }) => {  return new Response(    JSON.stringify({      message: `This was a ${request.method}!`,    }),  );};
```

If you define a `GET` function but no `HEAD` function, Astro will automatically handle `HEAD` requests by calling the `GET` function and stripping the body from the response.

![Image 3](https://docs.astro.build/houston_chef.webp) **Related recipes**

*   [Verify a Captcha](https://docs.astro.build/en/recipes/captcha/)
*   [Build forms with API routes](https://docs.astro.build/en/recipes/build-forms-api/)

### `request`

[Section titled request](https://docs.astro.build/en/guides/endpoints/#request-1)

In SSR mode, the `request` property returns a fully usable [`Request`](https://developer.mozilla.org/en-US/docs/Web/API/Request) object that refers to the current request. This allows you to accept data and check headers:

src/pages/test-post.json.ts

```
export const POST: APIRoute = async ({ request }) => {  if (request.headers.get("Content-Type") === "application/json") {    const body = await request.json();    const name = body.name;
    return new Response(      JSON.stringify({        message: "Your name was: " + name,      }),      {        status: 200,      },    );  }
  return new Response(null, { status: 400 });};
```

### Redirects

[Section titled Redirects](https://docs.astro.build/en/guides/endpoints/#redirects)

The endpoint context exports a `redirect()` utility similar to `Astro.redirect`:

src/pages/links/\[id\].js

```
import { getLinkUrl } from "../db";
export async function GET({ params, redirect }) {  const { id } = params;  const link = await getLinkUrl(id);
  if (!link) {    return new Response(null, {      status: 404,      statusText: "Not found",    });  }
  return redirect(link, 307);}
```

Learn

![Image 4](https://docs.astro.build/_astro/CodingInPublic.DpaYu7Qd_5sx41.webp)

Learn Astro with **Coding in Public**
-------------------------------------

150+ video lessons • Astro v5 ready

[Get 20% off](https://learnastro.dev/?code=ASTRO_PROMO)

[Edit page](https://github.com/withastro/docs/edit/main/src/content/docs/en/guides/endpoints.mdx) [Translate this page](https://contribute.docs.astro.build/guides/i18n/)

[Previous Routing](https://docs.astro.build/en/guides/routing/) [Next Middleware](https://docs.astro.build/en/guides/middleware/)

[Contribute](https://docs.astro.build/en/contribute/) [Community](https://astro.build/chat) [Sponsor](https://opencollective.com/astrodotbuild)